(this.webpackJsonpjumpy=this.webpackJsonpjumpy||[]).push([[0],{1477:function(e,t,r){"use strict";r.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var a,n,o=r(82),i=r.n(o),c=r(163),s=r(101),u=r(165),l=r(164),d=r(557),f=r(272),m=r(71);!function(e){e[e.BoxOrange=6]="BoxOrange",e[e.BoxRed=7]="BoxRed",e[e.BoxBlue=8]="BoxBlue",e[e.BoxGreen=9]="BoxGreen",e[e.BoxGrey=10]="BoxGrey",e[e.Player=52]="Player",e[e.TargetOrange=25]="TargetOrange",e[e.TargetRed=38]="TargetRed",e[e.TargetBlue=51]="TargetBlue",e[e.TargetGreen=64]="TargetGreen",e[e.TargetGrey=77]="TargetGrey",e[e.Wall=100]="Wall"}(n||(n={}));var v=(a={},Object(m.a)(a,n.BoxOrange,n.TargetOrange),Object(m.a)(a,n.BoxRed,n.TargetRed),Object(m.a)(a,n.BoxBlue,n.TargetBlue),Object(m.a)(a,n.BoxGreen,n.TargetGreen),Object(m.a)(a,n.BoxGrey,n.TargetGrey),a),y=[n.BoxOrange,n.BoxRed,n.BoxBlue,n.BoxGreen,n.BoxGrey],g=y.reduce((function(e,t){return e[t]=0,e}),{}),x=0,p=function(e,t){var r=e.player.anims,a=T(e,t);!function(e,t,r){var a=Phaser.Input.Keyboard.JustDown,n=a(e.left),o=a(e.right),i=a(e.up),c=a(e.down);n?t(b):o?t(h):i?t(B):c?t(O):r.currentAnim&&G(r)}(t.cursors,a,r)},b={absoluteMove:{x:"-=64"},centerMove:{x:-32,y:32},direction:"left"},h={absoluteMove:{x:"+=".concat(64)},centerMove:{x:96,y:32},direction:"right"},B={absoluteMove:{y:"-=64"},centerMove:{x:32,y:-32},direction:"up"},O={absoluteMove:{y:"+=64"},centerMove:{x:32,y:96},direction:"down"};var T=function(e,t){var r=e.player,a=e.world,n=e.boxesByColor,o=t.tweens,i=t.scene,c=w(n),s=k(a),u=j(a);return function(t){var a=r.x+t.centerMove.x,n=r.y+t.centerMove.y;if(!s(a,n)){var l=c(a,n);if(l){var d=l.box,m=l.color,y=d.x+t.centerMove.x,g=d.y+t.centerMove.y;if(s(y,g)||c(y,g))return;var p=v[m];u(d.x,d.y,p)&&M(m,-1);o.add(Object(f.a)({},t.absoluteMove,{duration:500,targets:d,onComplete:function(){!function(e){var t=e.box,r=e.color,a=v[r];u(t.x,t.y,a)&&(M(r,1),R()&&(console.log("you won woho"),i.start("level-finished",{moves:x})))}(l)}}))}!function(e,t,r){var a=e.player,n=e.player.anims;t.add(Object(f.a)({},r.absoluteMove,{duration:500,targets:a,onComplete:function(){G(n),x++,e.movesCountText.text="Moves: ".concat(x)},onStart:function(){n.play(r.direction,!0)}}))}(e,o,t)}}},w=function(e){return function(t,r){for(var a=0,n=Object.entries(e);a<n.length;a++){var o=Object(d.a)(n[a],2),i=o[0],c=o[1].find((function(e){return e.getBounds().contains(t,r)}));if(c)return{box:c,color:Number(i)}}}},k=function(e){return function(t,r){var a=e.getTileAtWorldXY(t,r);return!!a&&a.index===n.Wall}},j=function(e){return function(t,r,a){var n=e.getTileAtWorldXY(t,r);return!!n&&n.index===a}},G=function(e){var t=e.currentAnim.key;t.startsWith("idle-")||e.play("idle-".concat(t),!0)},M=function(e,t){g[e]+=t},R=function(){return Object.values(g).every((function(e){return 1===e}))};function W(e){if(!e)throw new Error("errr")}var C=function(e){return y.reduce((function(t,r){return t[r]=e.createFromTiles(r,0,{key:"tiles",frame:r}).map((function(e){return e.setOrigin(0)})),t}),{})};var F=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(c.a)(this,r),(e=t.call(this,"Scene")).cursors=void 0,e.elements=void 0,e.preload=function(){Object(s.a)(e).load.spritesheet("tiles","assets/sokoban_tilesheet.png",{frameWidth:64,startFrame:0}),e.cursors=e.input.keyboard.createCursorKeys()},e.create=function(){var t=Object(s.a)(e),r=function(e){var t=[[100,100,100,100,100,100,100,100,100,100],[100,0,0,0,0,0,0,0,0,100],[100,n.BoxOrange,n.BoxRed,n.BoxBlue,n.BoxGreen,n.BoxGrey,0,0,0,100],[100,n.TargetOrange,n.TargetRed,n.TargetBlue,n.TargetGreen,n.TargetGrey,n.Player,0,0,100],[100,0,0,0,0,0,0,0,0,100],[100,0,0,0,0,0,0,0,0,100],[100,0,0,0,0,0,0,0,0,100],[100,100,100,100,100,100,100,100,100,100]],r=e.make,a=e.add,o=e.anims,i=r.tilemap({data:t,tileWidth:64,tileHeight:64}),c=i.addTilesetImage("tiles"),s=i.createStaticLayer(0,c,0,0),u=s.createFromTiles(n.Player,0,{key:"tiles",frame:n.Player}).pop();W(u),u.setOrigin(0);var l=C(s);return function(e){e.create({key:"idle-down",frames:[{key:"tiles",frame:52}]}),e.create({key:"idle-left",frames:[{key:"tiles",frame:81}]}),e.create({key:"idle-right",frames:[{key:"tiles",frame:78}]}),e.create({key:"idle-up",frames:[{key:"tiles",frame:55}]}),e.create({key:"left",frames:e.generateFrameNumbers("tiles",{start:81,end:83}),frameRate:10,repeat:-1}),e.create({key:"right",frames:e.generateFrameNumbers("tiles",{start:78,end:80}),frameRate:10,repeat:-1}),e.create({key:"up",frames:e.generateFrameNumbers("tiles",{start:55,end:57}),frameRate:10,repeat:-1}),e.create({key:"down",frames:e.generateFrameNumbers("tiles",{start:52,end:54}),frameRate:10,repeat:-1})}(o),{player:u,world:s,boxesByColor:l,movesCountText:a.text(540,10,"Moves: 0")}}({make:t.make,anims:t.anims,add:t.add});e.elements=r},e.update=function(){var t=Object(s.a)(e),r=t.cursors,a=t.tweens,n=t.elements,o=t.scene;W(r);var i={cursors:r,tweens:a,scene:o};W(n),function(e){var t=e.elements,r=e.updateUtils;r.tweens.isTweening(t.player)||p(t,r)}({updateUtils:i,elements:n})},e}return r}(i.a.Scene),P=r(556),S=function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(){return Object(c.a)(this,r),t.call(this,"level-finished")}return Object(P.a)(r,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{moves:0},t=this.scale,r=t.width,a=t.height,n=this.add;n.text(.5*r,.5*a,"Level Complete!",{fontSize:48}),n.text(.5*r,.5*a,"Moves: ".concat(e.moves))}}]),r}(i.a.Scene),A={type:i.a.AUTO,width:640,height:512,physics:{default:"arcade",arcade:{gravity:{y:300},debug:!1}},scene:[F,S],parent:"phaser"};new i.a.Game(A);"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},558:function(e,t,r){e.exports=r(1477)}},[[558,1,2]]]);
//# sourceMappingURL=main.cb16bfa9.chunk.js.map